version: '1.0'
steps:
  BuildMaven:
    title: Building Maven project in Docker Image
    image: maven:3.5.0-jdk-8
    working_directory: ${{main_clone}}
    commands:
        - mvn clean install
  DeployToCF:
    title: Deploy to Cloud Foundry
    image: nulldriver/cf-cli-resource
    working_directory: ${{BuildMaven}}
    commands:
        - env
        - cf login -a "https://api.cf.eu10.hana.ondemand.com" -u "${USER}" -p "${PASSWORD}" -o "P1941656886trial_trial" -s "dev"
        - cf push